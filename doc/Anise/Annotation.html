<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Module: Anise::Annotation</title>

  
    <link rel="SHORTCUT ICON" href="../assets/icon/module.png">
  

  <link type="text/css" rel="stylesheet" href="../assets/rdoc.css" media="screen" />
  <link type="text/css" rel="stylesheet" href="../assets/highlight/styles/github.css" title="GitHub" />

  <script type="text/javascript" charset="utf-8" src="../assets/jquery.js"></script>
  <script type="text/javascript" charset="utf-8" src="../assets/highlight/highlight.pack.js"></script>
  <script type="text/javascript" charset="utf-8" src="../assets/quicksearch.js"></script>
  <script type="text/javascript" charset="utf-8" src="../assets/main.js"></script>

  <script type="text/javascript">
    $(document).ready( function() {
      $('#documentation pre').wrapInner('<code></code>');
      hljs.tabReplace = '    ';
      hljs.initHighlightingOnLoad('ruby');

	    hookSourceViews();
	    hookDebuggingToggle();
	    hookQuickSearch();
	    highlightLocationTarget();

	    $('ul.link-list a').bind( "click", highlightClickTarget );
    });
  </script>
</head>
<body class="module">
<div id="main">

  <div class="head">
    <h1>
      
        <img src="../assets/icon/module.png" align="absmiddle">&nbsp;
      
      <a href="../index.html">&quot;Anise&quot;</a>&nbsp;
      <a href="/">Anise::Annotation</a>
    </h1>
  </div>

  <div id="metadata">
    <div id="project-metadata">

      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li class="file"><a href="../lib/anise/annotation_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/anise/annotation.rb">lib/anise/annotation.rb</a></li>
          
          </ul>
        </div>
      </div>

      <!-- What about Git info, or Hg info? This seems almost silly, albeit kind of cool. -->
      <!-- TODO: generalize this for all SCMs -->

      
    </div>

    <div id="class-metadata">

      <!-- Parent Class -->
      

      <!-- Namespace Contents -->
      
      <div id="namespace-list-section" class="section">
        <h3 class="section-header">Namespace</h3>
        <ul class="link-list">
          
          <li class="module"><a href="Annotation/Aid.html">Anise::Annotation::Aid</a></li>
          
        </ul>
      </div>
      

      <!-- Method Quickref -->
      
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
            
            <li class="singleton">
              <a href="#method-c-included">::included</a>
            </li>
          
        </ul>
      </div>
      

      <!-- Included Modules -->
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Information</h3>
        <ul>
        
          <li class="file"><a href="../COPYING_rdoc.html">COPYING.rdoc</a></li>
        
          <li class="file"><a href="../HISTORY_rdoc.html">HISTORY.rdoc</a></li>
        
          <li class="file"><a href="../README_rdoc.html">README.rdoc</a></li>
        
          <li class="file"><a href="../APACHE2_txt.html">APACHE2.txt</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class Index
          <span class="search-toggle"><img src="../assets/icon/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <!-- classpage.html : classes -->
        <ul class="link-list">
        
          <li class="module"><a href="../Anise.html">Anise</a></li>
        
          <li class="module"><a href="../Anise/Annotation.html">Anise::Annotation</a></li>
        
          <li class="module"><a href="../Anise/Annotation/Aid.html">Anise::Annotation::Aid</a></li>
        
          <li class="module"><a href="../Anise/Annotator.html">Anise::Annotator</a></li>
        
          <li class="module"><a href="../Anise/Annotator/Aid.html">Anise::Annotator::Aid</a></li>
        
          <li class="module"><a href="../Anise/Attribute.html">Anise::Attribute</a></li>
        
          <li class="module"><a href="../Anise/Attribute/Aid.html">Anise::Attribute::Aid</a></li>
        
          <li class="class"><a href="../Module.html">Module</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>
    </div>

    <div id="validator-badges">
      
      <div style="float: right; margin-right: 5px;">
        <a href="http://validator.w3.org/check/referer"><img src="../assets/icon/check.png" alt="[Validate]" height="16" width="16" /></a>
      </div>
      Generated with <a href="http://rubyworks.github.com/newfish">Newfish</a> 0.2.0
      <br/><br/>
    </div>
  </div>

  <div id="documentation">

    <div id="description">
      
        <h1>Annotation</h1>
      

      
<p>The Annotate module is the core of the <a href="../Anise.html">Anise</a>
system. It provides the framework for annotating class or module related
objects, typically symbols representing methods, with arbitrary metadata.
These annotations do not do anything in themselves. They are simply data.
But they can be put to good use. For instance an attribute validator might
check for an annotation called :valid and test against it.</p>

<h2>Synopsis</h2>

<pre>require 'anise/annotation'

class X
  include Anise::Annotation

  attr :a

  ann :a, :desc =&gt; &quot;A Number&quot;
end

X.ann(:a, :desc)  #=&gt; &quot;A Number&quot;</pre>

<p>As stated, annotations need not only annotate methods, they are arbitrary,
so they can be used for any purpose. For example, we may want to annotate
instance variables.</p>

<pre>class X
  include Anise::Annotation

  ann :@a, :valid =&gt; lambda{ |x| x.is_a?(Integer) }

  def validate
    instance_variables.each do |iv|
      if validator = self.class.ann(iv)[:valid]
        value = instance_variable_get(iv)
        unless validator.call(value)
          raise &quot;Invalid value #{value} for #{iv}&quot;
        end
      end
    end
  end
end</pre>

<p>Or, we could even annotate the class itself.</p>

<pre>class X
  include Anise::Annotate

  ann self, :valid =&gt; lambda{ |x| x.is_a?(Enumerable) }
end</pre>

<p>Although annotations are arbitrary they are tied to the class or module
they are defined against.</p>

    </div>

    <!-- Constants -->
    

    <!-- Attributes -->
    

    <!-- Methods -->
    
    <div id="public-class-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="included-method" class="method-detail ">
        <a name="method-c-included"></a>

        <div class="method-heading">
        
          <span class="method-name">included</span><span
            class="method-args">(base)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="included-source">
<pre>
<span class="ruby-comment"># File lib/anise/annotation.rb, line 72</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">included</span>(<span class="ruby-identifier">base</span>)
  <span class="ruby-identifier">base</span>.<span class="ruby-identifier">extend</span> <span class="ruby-constant">Aid</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
    </div>
  

  </div>


  <div id="rdoc-debugging-section-dump" class="debugging-section">
  
    <p>Disabled; run with --debug to generate this.</p>
  
  </div>

</main>
</body>
</html>

